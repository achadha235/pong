<html>
	<head>
		<script src="js/socket.io.js"> </script>
	</head>

	<body>
		<div id='status'> </div>

	</body>
</html>

</style>

<script>

	var data ;
	var socket = io.connect('http://localhost:3000');

	socket.on('update', function (model){
		data = model;
		console.log('updating model...');
		updateTable();
	})

	var leftPressed = false;
	var rightPressed = false;

	window.addEventListener('keydown', function (e) {
    	if (e.keyCode === 37 && !leftPressed && !rightPressed) {
    		leftPressed = true;
	        socket.emit('moveLeft', {});
	        console.log('emmitting')
	    }
	    else if (e.keyCode === 39  && !leftPressed && !rightPressed){
	    	rightPressed = true;
	    	socket.emit('moveRight', {});
	        console.log('emmitting')

	    }
	}, false);

	window.addEventListener('keyup', function (e) {
    	if (e.keyCode === 37) {
    		leftPressed = false;
	        socket.emit('stop', {});
	        console.log('emmitting')

	    }
	    else if (e.keyCode === 39){
	    	rightPressed = false;
	    	socket.emit('stop', {});
	        console.log('emmitting')

	    }
	}, false);

	function updateTable(){
		console.log(data);
		document.getElementById('status').innerHTML = JSON.stringify(data);
	}


</script>
